# Trading Platform - Staging Environment Configuration
# DO NOT COMMIT THIS FILE TO VERSION CONTROL
# Copy this file to .env and fill in all required values

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================
NODE_ENV=staging
PORT=3000
API_URL=https://api-staging.tradingplatform.com
FRONTEND_URL=https://staging.tradingplatform.com
WS_URL=wss://api-staging.tradingplatform.com

# Number of replicas (single instance for staging)
API_REPLICAS=1
WEB_REPLICAS=1

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
DB_USER=trading_platform_staging
DB_PASSWORD=staging_db_password_change_me
DB_NAME=trading_platform_staging
DATABASE_URL=postgresql://${DB_USER}:${DB_PASSWORD}@db:5432/${DB_NAME}?schema=public

# Connection pool settings
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
REDIS_URL=redis://redis:6379
REDIS_PASSWORD=staging_redis_password

# =============================================================================
# JWT CONFIGURATION
# =============================================================================
JWT_SECRET=staging_jwt_secret_not_for_production_use
JWT_REFRESH_SECRET=staging_refresh_secret_not_for_production_use
JWT_EXPIRE=60m
JWT_REFRESH_EXPIRE=7d

# =============================================================================
# PAYMENT API CONFIGURATION (SANDBOX MODE)
# =============================================================================
# Wave API (Sandbox)
WAVE_API_KEY=wave_sandbox_key
WAVE_SECRET=wave_sandbox_secret
WAVE_WEBHOOK_SECRET=wave_sandbox_webhook_secret

# Orange Money API (Sandbox)
ORANGE_API_KEY=orange_sandbox_key
ORANGE_SECRET=orange_sandbox_secret
ORANGE_WEBHOOK_SECRET=orange_sandbox_webhook_secret

# Stripe (Test Mode)
STRIPE_SECRET_KEY=sk_test_your_stripe_test_key
STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_test_key
STRIPE_WEBHOOK_SECRET=whsec_your_stripe_test_webhook_secret

# =============================================================================
# PARTNER BANK API CONFIGURATION (SANDBOX)
# =============================================================================
PARTNER_BANK_API_KEY=bank_sandbox_key
PARTNER_BANK_SECRET=bank_sandbox_secret
PARTNER_BANK_BASE_URL=https://sandbox-api.partnerbank.com/v1

# =============================================================================
# WEB3 / CRYPTOCURRENCY CONFIGURATION (TESTNET)
# =============================================================================
INFURA_API_KEY=your_infura_api_key
ETHEREUM_RPC_URL=https://sepolia.infura.io/v3/your_infura_key
CRYPTO_DEPOSIT_ADDRESS=0xYourTestnetDepositAddress

# =============================================================================
# AWS S3 CONFIGURATION (Staging Bucket)
# =============================================================================
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_S3_BUCKET=trading-platform-staging-documents
AWS_REGION=us-east-1

# Backup bucket
BACKUP_S3_BUCKET=trading-platform-staging-backups

# =============================================================================
# EMAIL CONFIGURATION (Test SMTP)
# =============================================================================
SMTP_HOST=smtp.mailtrap.io
SMTP_PORT=587
SMTP_USER=your_mailtrap_user
SMTP_PASS=your_mailtrap_password

# Email from address
EMAIL_FROM=staging@tradingplatform.com
EMAIL_FROM_NAME="Trading Platform Staging"

# =============================================================================
# MONITORING & ERROR TRACKING
# =============================================================================
# Sentry (Staging Project)
SENTRY_DSN=https://your_staging_sentry_dsn@sentry.io/project_id
SENTRY_ENVIRONMENT=staging

# LogRocket (Staging App)
LOGROCKET_ID=your_staging_logrocket_app_id

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================
BACKUP_SCHEDULE=0 6 * * *
BACKUP_RETENTION_DAYS=7

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
# CORS Origins (more permissive for staging)
CORS_ORIGINS=https://staging.tradingplatform.com,http://localhost:3000,http://localhost:5173

# Rate Limiting (more lenient for testing)
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=1000

# Session Configuration
SESSION_SECRET=staging_session_secret
SESSION_MAX_AGE=86400000

# =============================================================================
# FEATURE FLAGS (Enable all for testing)
# =============================================================================
ENABLE_CRYPTO_PAYMENTS=true
ENABLE_WAVE_PAYMENTS=true
ENABLE_ORANGE_PAYMENTS=true
ENABLE_STRIPE_PAYMENTS=true
ENABLE_BANK_TRANSFER=true

# Trading Features
ENABLE_LIMIT_ORDERS=true
ENABLE_MARKET_ORDERS=true
ENABLE_REAL_TIME_UPDATES=true

# =============================================================================
# BUSINESS LOGIC CONFIGURATION
# =============================================================================
# Platform Fees (same as production)
PLATFORM_FEE_PERCENTAGE=5.0
TRADING_FEE_PERCENTAGE=0.5
DIVIDEND_POOL_PERCENTAGE=60.0
REINVESTMENT_PERCENTAGE=40.0

# Trading Limits (lower for testing)
MIN_ORDER_AMOUNT=1.00
MAX_ORDER_AMOUNT=10000.00
MIN_SHARE_PRICE=0.01
MAX_SHARE_PRICE=1000.00

# KYC Limits (disabled for easier testing)
KYC_REQUIRED_THRESHOLD=10000.00
KYC_VERIFICATION_REQUIRED=false

# =============================================================================
# NOTIFICATIONS
# =============================================================================
# Slack Webhook for staging alerts
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/STAGING/WEBHOOK

# Admin email
ADMIN_EMAIL=dev-team@tradingplatform.com

# =============================================================================
# LOGGING
# =============================================================================
LOG_LEVEL=debug
LOG_FORMAT=dev

# =============================================================================
# PERFORMANCE TUNING
# =============================================================================
WEB_CONCURRENCY=1
REQUEST_TIMEOUT=60000
MAX_REQUEST_BODY_SIZE=50mb
MAX_FILE_UPLOAD_SIZE=10mb

# =============================================================================
# DEBUGGING
# =============================================================================
# Enable detailed error messages
DEBUG=true
VERBOSE_LOGGING=true

# API Documentation (enable in staging)
ENABLE_SWAGGER=true
SWAGGER_PATH=/api-docs
